{
    "sourceFile": "src/components/account/editProfilPicture.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 8,
            "patches": [
                {
                    "date": 1742292986073,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1742293031944,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,23 +6,9 @@\n \n   const [profileImage, setProfileImage] = useState(\"\");\n   const [selectedFile, setSelectedFile] = useState(null);\n \n-  // ðŸ”¹ Fetch current profile image\n-  useEffect(() => {\n-    const fetchProfileImage = async () => {\n-      try {\n-        const response = await fetch(${api}/profile?userId=${userId}, {\n-          headers: { Authorization: Bearer ${token} },\n-        });\n-        if (!response.ok) throw new Error(\"Failed to fetch profile image\");\n \n-        const data = await response.json();\n-        setProfileImage(data.profileImage);\n-      } catch (error) {\n-        console.error(\"Error fetching profile image:\", error);\n-      }\n-    };\n \n     fetchProfileImage();\n   }, [api, userId, token]);\n \n"
                },
                {
                    "date": 1742293037401,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n const EditProfilePicture = ({ api }) => {\n   const userId = localStorage.getItem(\"userId\");\n   const token = localStorage.getItem(\"token\");\n \n-  const [profileImage, setProfileImage] = useState(\"\");\n+  const [profileImage, setProfileImage] = useState(\");\n   const [selectedFile, setSelectedFile] = useState(null);\n \n \n \n"
                },
                {
                    "date": 1742293044881,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n const EditProfilePicture = ({ api }) => {\n   const userId = localStorage.getItem(\"userId\");\n   const token = localStorage.getItem(\"token\");\n \n-  const [profileImage, setProfileImage] = useState(\");\n+  const [profileImage, setProfileImage] = useState(localStorage.getItem(\"profileImage\"));\n   const [selectedFile, setSelectedFile] = useState(null);\n \n \n \n"
                },
                {
                    "date": 1742293058171,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n     try {\n       const formData = new FormData();\n       formData.append(\"profileImage\", selectedFile);\n \n-      const uploadImage = await fetch(${api}/profile/update-image/${userId}, {\n+      const uploadImage = await fetch(`${api}/profile/update-image/${userId}, {\n         method: \"PUT\",\n         headers: { Authorization: Bearer ${token} },\n         body: formData,\n       });\n"
                },
                {
                    "date": 1742293063809,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,18 +28,18 @@\n     try {\n       const formData = new FormData();\n       formData.append(\"profileImage\", selectedFile);\n \n-      const uploadImage = await fetch(`${api}/profile/update-image/${userId}, {\n+      const uploadImage = await fetch(`${api}/profile/update-image/${userId}`, {\n         method: \"PUT\",\n         headers: { Authorization: Bearer ${token} },\n         body: formData,\n       });\n \n       if (!uploadImage.ok) throw new Error(\"Image upload failed\");\n \n       const imgResponse = await uploadImage.json();\n-      setProfileImage(${api}${imgResponse.user.profileImage}); // Update image URL\n+      setProfileImage(`${api}${imgResponse.user.profileImage}); // Update image URL\n \n       alert(\"Profile picture updated successfully!\");\n     } catch (error) {\n       console.error(\"Error uploading profile image:\", error);\n"
                },
                {
                    "date": 1742293080728,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,16 +30,16 @@\n       formData.append(\"profileImage\", selectedFile);\n \n       const uploadImage = await fetch(`${api}/profile/update-image/${userId}`, {\n         method: \"PUT\",\n-        headers: { Authorization: Bearer ${token} },\n+        headers: { Authorization: `Bearer ${token} },\n         body: formData,\n       });\n \n       if (!uploadImage.ok) throw new Error(\"Image upload failed\");\n \n       const imgResponse = await uploadImage.json();\n-      setProfileImage(`${api}${imgResponse.user.profileImage}); // Update image URL\n+      setProfileImage(`${api}${imgResponse.user.profileImage}`); // Update image URL\n \n       alert(\"Profile picture updated successfully!\");\n     } catch (error) {\n       console.error(\"Error uploading profile image:\", error);\n"
                },
                {
                    "date": 1742293096627,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,11 +8,10 @@\n   const [selectedFile, setSelectedFile] = useState(null);\n \n \n \n-    fetchProfileImage();\n-  }, [api, userId, token]);\n \n+\n   // ðŸ”¹ Handle Image Selection\n   const handleImageChange = (e) => {\n     const file = e.target.files[0];\n     if (file) {\n@@ -30,9 +29,9 @@\n       formData.append(\"profileImage\", selectedFile);\n \n       const uploadImage = await fetch(`${api}/profile/update-image/${userId}`, {\n         method: \"PUT\",\n-        headers: { Authorization: `Bearer ${token} },\n+        headers: { Authorization: `Bearer ${token}` },\n         body: formData,\n       });\n \n       if (!uploadImage.ok) throw new Error(\"Image upload failed\");\n"
                },
                {
                    "date": 1742293130701,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,11 +7,8 @@\n   const [profileImage, setProfileImage] = useState(localStorage.getItem(\"profileImage\"));\n   const [selectedFile, setSelectedFile] = useState(null);\n \n \n-\n-\n-\n   // ðŸ”¹ Handle Image Selection\n   const handleImageChange = (e) => {\n     const file = e.target.files[0];\n     if (file) {\n@@ -48,9 +45,9 @@\n   return (\n     <form onSubmit={handleSubmit} style={styles.form}>\n       <label>\n         <img\n-          src={profileImage ? ${api}${profileImage} : \"/default-profile.png\"}\n+          src={profileImage ? `${api}${profileImage} : \"/default-profile.png\"}\n           alt=\"Profile\"\n           width=\"100\"\n           height=\"100\"\n           style={{ borderRadius: \"50%\" }}\n"
                }
            ],
            "date": 1742292986072,
            "name": "Commit-0",
            "content": "import React, { useState, useEffect } from \"react\";\n\nconst EditProfilePicture = ({ api }) => {\n  const userId = localStorage.getItem(\"userId\");\n  const token = localStorage.getItem(\"token\");\n\n  const [profileImage, setProfileImage] = useState(\"\");\n  const [selectedFile, setSelectedFile] = useState(null);\n\n  // ðŸ”¹ Fetch current profile image\n  useEffect(() => {\n    const fetchProfileImage = async () => {\n      try {\n        const response = await fetch(${api}/profile?userId=${userId}, {\n          headers: { Authorization: Bearer ${token} },\n        });\n        if (!response.ok) throw new Error(\"Failed to fetch profile image\");\n\n        const data = await response.json();\n        setProfileImage(data.profileImage);\n      } catch (error) {\n        console.error(\"Error fetching profile image:\", error);\n      }\n    };\n\n    fetchProfileImage();\n  }, [api, userId, token]);\n\n  // ðŸ”¹ Handle Image Selection\n  const handleImageChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      setSelectedFile(file);\n    }\n  };\n\n  // ðŸ”¹ Upload Profile Image\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!selectedFile) return alert(\"Please select an image!\");\n\n    try {\n      const formData = new FormData();\n      formData.append(\"profileImage\", selectedFile);\n\n      const uploadImage = await fetch(${api}/profile/update-image/${userId}, {\n        method: \"PUT\",\n        headers: { Authorization: Bearer ${token} },\n        body: formData,\n      });\n\n      if (!uploadImage.ok) throw new Error(\"Image upload failed\");\n\n      const imgResponse = await uploadImage.json();\n      setProfileImage(${api}${imgResponse.user.profileImage}); // Update image URL\n\n      alert(\"Profile picture updated successfully!\");\n    } catch (error) {\n      console.error(\"Error uploading profile image:\", error);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={styles.form}>\n      <label>\n        <img\n          src={profileImage ? ${api}${profileImage} : \"/default-profile.png\"}\n          alt=\"Profile\"\n          width=\"100\"\n          height=\"100\"\n          style={{ borderRadius: \"50%\" }}\n        />\n      </label>\n      <label style={styles.label}>\n        Upload New Profile Picture:\n        <input type=\"file\" accept=\"image/*\" onChange={handleImageChange} />\n      </label>\n      <button type=\"submit\" style={styles.button}>\n        Upload\n      </button>\n    </form>\n  );\n};\n\nconst styles = {\n  form: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    maxWidth: \"400px\",\n    margin: \"0 auto\",\n    padding: \"20px\",\n  },\n  label: { marginBottom: \"10px\", fontWeight: \"bold\" },\n  button: {\n    padding: \"10px 20px\",\n    borderRadius: \"4px\",\n    border: \"none\",\n    backgroundColor: \"#007bff\",\n    color: \"#fff\",\n    cursor: \"pointer\",\n  },\n};\n\nexport default EditProfilePicture;"
        }
    ]
}