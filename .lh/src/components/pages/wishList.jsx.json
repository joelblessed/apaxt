{
    "sourceFile": "src/components/pages/wishList.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 15,
            "patches": [
                {
                    "date": 1742921767353,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1742921774078,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n const Wishlist = ({ userId, token }) => {\n   const [wishlist, setWishlist] = useState([]);\n \n   useEffect(() => {\n-    fetch(http://localhost:5000/wishlist/${userId}, {\n+    fetch(`http://localhost:5000/wishlist/${userId}, {\n       headers: { Authorization: Bearer ${token} },\n     })\n       .then((res) => res.json())\n       .then((data) => setWishlist(data))\n"
                },
                {
                    "date": 1742921779373,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n const Wishlist = ({ userId, token }) => {\n   const [wishlist, setWishlist] = useState([]);\n \n   useEffect(() => {\n-    fetch(`http://localhost:5000/wishlist/${userId}, {\n+    fetch(`http://localhost:5000/wishlist/${userId}`, {\n       headers: { Authorization: Bearer ${token} },\n     })\n       .then((res) => res.json())\n       .then((data) => setWishlist(data))\n"
                },
                {
                    "date": 1742921785405,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n   const [wishlist, setWishlist] = useState([]);\n \n   useEffect(() => {\n     fetch(`http://localhost:5000/wishlist/${userId}`, {\n-      headers: { Authorization: Bearer ${token} },\n+      headers: { Authorization: `Bearer ${token} },\n     })\n       .then((res) => res.json())\n       .then((data) => setWishlist(data))\n       .catch((error) => console.error(\"Error fetching wishlist:\", error));\n"
                },
                {
                    "date": 1742921816292,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,11 +2,13 @@\n \n const Wishlist = ({ userId, token }) => {\n   const [wishlist, setWishlist] = useState([]);\n \n+  \n+\n   useEffect(() => {\n     fetch(`http://localhost:5000/wishlist/${userId}`, {\n-      headers: { Authorization: `Bearer ${token} },\n+      headers: { Authorization: `Bearer ${token}` },\n     })\n       .then((res) => res.json())\n       .then((data) => setWishlist(data))\n       .catch((error) => console.error(\"Error fetching wishlist:\", error));\n"
                },
                {
                    "date": 1742921823335,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,11 @@\n import { useEffect, useState } from \"react\";\n \n-const Wishlist = ({ userId, token }) => {\n+const Wishlist = ({ }) => {\n   const [wishlist, setWishlist] = useState([]);\n \n-  \n+  const userId = localStorage.getItem(\"userId\")\n+  const token = localStorage.getItem(\"token\")\n \n   useEffect(() => {\n     fetch(`http://localhost:5000/wishlist/${userId}`, {\n       headers: { Authorization: `Bearer ${token}` },\n"
                },
                {
                    "date": 1742922167712,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,7 @@\n import { useEffect, useState } from \"react\";\n \n-const Wishlist = ({ }) => {\n+const WishList = ({ }) => {\n   const [wishlist, setWishlist] = useState([]);\n \n   const userId = localStorage.getItem(\"userId\")\n   const token = localStorage.getItem(\"token\")\n"
                },
                {
                    "date": 1742922173186,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,5 +34,5 @@\n     </div>\n   );\n };\n \n-export default Wishlist;\n\\ No newline at end of file\n+export default WishList;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1742922344594,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n       .catch((error) => console.error(\"Error fetching wishlist:\", error));\n   }, [userId, token]);\n \n   const handleAddToCart = async (productId) => {\n-    await removeFromWishlist(userId, productId, token);\n+    // await removeFromWishlist(userId, productId, token);\n     setWishlist(wishlist.filter((item) => item.id !== productId));\n   };\n \n   return (\n"
                },
                {
                    "date": 1742922987827,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,8 +19,14 @@\n     // await removeFromWishlist(userId, productId, token);\n     setWishlist(wishlist.filter((item) => item.id !== productId));\n   };\n \n+  const handleDelete = async (productId) => {\n+    await removeFromWishlist(userId, productId);\n+    setWishlist(wishlist.filter((item) => item.id !== productId));\n+  };\n+\n+\n   return (\n     <div>\n       <h2>My Wishlist</h2>\n       <ul>\n"
                },
                {
                    "date": 1742923036952,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,8 +33,9 @@\n         {wishlist.map((item) => (\n           <li key={item.id}>\n             {item.name} - ${item.price}\n             <button onClick={() => handleAddToCart(item.id)}>Add to Cart</button>\n+            \n           </li>\n         ))}\n       </ul>\n     </div>\n"
                },
                {
                    "date": 1742923244973,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,17 +25,36 @@\n     setWishlist(wishlist.filter((item) => item.id !== productId));\n   };\n \n \n+   // Define removeFromWishlist inside the component\n+   const removeFromWishlist = async (productId) => {\n+    try {\n+      const response = await fetch(http://localhost:5000/wishlist/delete, {\n+        method: \"POST\",\n+        headers: { \"Content-Type\": \"application/json\" },\n+        body: JSON.stringify({ userId, productId }),\n+      });\n+\n+      const data = await response.json();\n+      console.log(\"Deleted:\", data);\n+\n+      // Update state to remove the product\n+      setWishlist(wishlist.filter((item) => item.id !== productId));\n+    } catch (error) {\n+      console.error(\"Error removing item from wishlist:\", error);\n+    }\n+  };\n+\n   return (\n     <div>\n       <h2>My Wishlist</h2>\n       <ul>\n         {wishlist.map((item) => (\n           <li key={item.id}>\n             {item.name} - ${item.price}\n             <button onClick={() => handleAddToCart(item.id)}>Add to Cart</button>\n-            \n+            <button onClick={() => handleDelete(item.id)}>Remove</button>\n           </li>\n         ))}\n       </ul>\n     </div>\n"
                },
                {
                    "date": 1742923252968,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,64 @@\n+import { useEffect, useState } from \"react\";\n+\n+const WishList = ({ }) => {\n+  const [wishlist, setWishlist] = useState([]);\n+\n+  const userId = localStorage.getItem(\"userId\")\n+  const token = localStorage.getItem(\"token\")\n+\n+  useEffect(() => {\n+    fetch(`http://localhost:5000/wishlist/${userId}`, {\n+      headers: { Authorization: `Bearer ${token}` },\n+    })\n+      .then((res) => res.json())\n+      .then((data) => setWishlist(data))\n+      .catch((error) => console.error(\"Error fetching wishlist:\", error));\n+  }, [userId, token]);\n+\n+  const handleAddToCart = async (productId) => {\n+    // await removeFromWishlist(userId, productId, token);\n+    setWishlist(wishlist.filter((item) => item.id !== productId));\n+  };\n+\n+  const handleDelete = async (productId) => {\n+    await removeFromWishlist(userId, productId);\n+    setWishlist(wishlist.filter((item) => item.id !== productId));\n+  };\n+\n+\n+   // Define removeFromWishlist inside the component\n+   const removeFromWishlist = async (productId) => {\n+    try {\n+      const response = await fetch(`http://localhost:5000/wishlist/delete`, {\n+        method: \"POST\",\n+        headers: { \"Content-Type\": \"application/json\" },\n+        body: JSON.stringify({ userId, productId }),\n+      });\n+\n+      const data = await response.json();\n+      console.log(\"Deleted:\", data);\n+\n+      // Update state to remove the product\n+      setWishlist(wishlist.filter((item) => item.id !== productId));\n+    } catch (error) {\n+      console.error(\"Error removing item from wishlist:\", error);\n+    }\n+  };\n+\n+  return (\n+    <div>\n+      <h2>My Wishlist</h2>\n+      <ul>\n+        {wishlist.map((item) => (\n+          <li key={item.id}>\n+            {item.name} - ${item.price}\n+            <button onClick={() => handleAddToCart(item.id)}>Add to Cart</button>\n+            <button onClick={() => handleDelete(item.id)}>Remove</button>\n+          </li>\n+        ))}\n+      </ul>\n+    </div>\n+  );\n+};\n+\n+export default WishList;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1742923269704,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n       .catch((error) => console.error(\"Error fetching wishlist:\", error));\n   }, [userId, token]);\n \n   const handleAddToCart = async (productId) => {\n-    // await removeFromWishlist(userId, productId, token);\n+    // await removeFromWishlist(userId, productId, token);?\n     setWishlist(wishlist.filter((item) => item.id !== productId));\n   };\n \n   const handleDelete = async (productId) => {\n@@ -60,69 +60,5 @@\n     </div>\n   );\n };\n \n-export default WishList;\n-import { useEffect, useState } from \"react\";\n-\n-const WishList = ({ }) => {\n-  const [wishlist, setWishlist] = useState([]);\n-\n-  const userId = localStorage.getItem(\"userId\")\n-  const token = localStorage.getItem(\"token\")\n-\n-  useEffect(() => {\n-    fetch(`http://localhost:5000/wishlist/${userId}`, {\n-      headers: { Authorization: `Bearer ${token}` },\n-    })\n-      .then((res) => res.json())\n-      .then((data) => setWishlist(data))\n-      .catch((error) => console.error(\"Error fetching wishlist:\", error));\n-  }, [userId, token]);\n-\n-  const handleAddToCart = async (productId) => {\n-    // await removeFromWishlist(userId, productId, token);\n-    setWishlist(wishlist.filter((item) => item.id !== productId));\n-  };\n-\n-  const handleDelete = async (productId) => {\n-    await removeFromWishlist(userId, productId);\n-    setWishlist(wishlist.filter((item) => item.id !== productId));\n-  };\n-\n-\n-   // Define removeFromWishlist inside the component\n-   const removeFromWishlist = async (productId) => {\n-    try {\n-      const response = await fetch(http://localhost:5000/wishlist/delete, {\n-        method: \"POST\",\n-        headers: { \"Content-Type\": \"application/json\" },\n-        body: JSON.stringify({ userId, productId }),\n-      });\n-\n-      const data = await response.json();\n-      console.log(\"Deleted:\", data);\n-\n-      // Update state to remove the product\n-      setWishlist(wishlist.filter((item) => item.id !== productId));\n-    } catch (error) {\n-      console.error(\"Error removing item from wishlist:\", error);\n-    }\n-  };\n-\n-  return (\n-    <div>\n-      <h2>My Wishlist</h2>\n-      <ul>\n-        {wishlist.map((item) => (\n-          <li key={item.id}>\n-            {item.name} - ${item.price}\n-            <button onClick={() => handleAddToCart(item.id)}>Add to Cart</button>\n-            <button onClick={() => handleDelete(item.id)}>Remove</button>\n-          </li>\n-        ))}\n-      </ul>\n-    </div>\n-  );\n-};\n-\n export default WishList;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1742923948178,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,12 +14,9 @@\n       .then((data) => setWishlist(data))\n       .catch((error) => console.error(\"Error fetching wishlist:\", error));\n   }, [userId, token]);\n \n-  const handleAddToCart = async (productId) => {\n-    // await removeFromWishlist(userId, productId, token);?\n-    setWishlist(wishlist.filter((item) => item.id !== productId));\n-  };\n+  \n \n   const handleDelete = async (productId) => {\n     await removeFromWishlist(userId, productId);\n     setWishlist(wishlist.filter((item) => item.id !== productId));\n"
                },
                {
                    "date": 1742923969363,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,28 @@\n       .then((data) => setWishlist(data))\n       .catch((error) => console.error(\"Error fetching wishlist:\", error));\n   }, [userId, token]);\n \n+  const addToCart = async (product, userId) => {\n+    try {\n+      const response = await fetch(\"http://localhost:5000/cart/add\", {\n+        method: \"POST\",\n+        headers: { \"Content-Type\": \"application/json\" },\n+        body: JSON.stringify({ userId, product }),\n+      });\n   \n+      const data = await response.json();\n+      console.log(data.message);\n+  \n+      if (response.ok) {\n+        alert(\"Product added to cart and removed from wishlist!\");\n+      } else {\n+        alert(data.message);\n+      }\n+    } catch (error) {\n+      console.error(\"Error adding to cart:\", error);\n+    }\n+  };\n \n   const handleDelete = async (productId) => {\n     await removeFromWishlist(userId, productId);\n     setWishlist(wishlist.filter((item) => item.id !== productId));\n@@ -48,9 +67,9 @@\n       <ul>\n         {wishlist.map((item) => (\n           <li key={item.id}>\n             {item.name} - ${item.price}\n-            <button onClick={() => handleAddToCart(item.id)}>Add to Cart</button>\n+            <button onClick={() => addToCart(item.id)}>Add to Cart</button>\n             <button onClick={() => handleDelete(item.id)}>Remove</button>\n           </li>\n         ))}\n       </ul>\n"
                }
            ],
            "date": 1742921767353,
            "name": "Commit-0",
            "content": "import { useEffect, useState } from \"react\";\n\nconst Wishlist = ({ userId, token }) => {\n  const [wishlist, setWishlist] = useState([]);\n\n  useEffect(() => {\n    fetch(http://localhost:5000/wishlist/${userId}, {\n      headers: { Authorization: Bearer ${token} },\n    })\n      .then((res) => res.json())\n      .then((data) => setWishlist(data))\n      .catch((error) => console.error(\"Error fetching wishlist:\", error));\n  }, [userId, token]);\n\n  const handleAddToCart = async (productId) => {\n    await removeFromWishlist(userId, productId, token);\n    setWishlist(wishlist.filter((item) => item.id !== productId));\n  };\n\n  return (\n    <div>\n      <h2>My Wishlist</h2>\n      <ul>\n        {wishlist.map((item) => (\n          <li key={item.id}>\n            {item.name} - ${item.price}\n            <button onClick={() => handleAddToCart(item.id)}>Add to Cart</button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default Wishlist;"
        }
    ]
}