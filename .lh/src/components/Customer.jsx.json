{
    "sourceFile": "src/components/Customer.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1737534879657,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1737534884964,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,9 @@\n     }\n \n     const GetUserAccess = () => {\n         const userrole = sessionStorage.getItem('userrole') != null ? sessionStorage.getItem('userrole').toString() : '';\n-        fetch(\"http://localhost:8000/roleaccess?role=\" + userrole + \"&menu=customer\").then(res => {\n+        fetch(\"http://localhost:4000/roleaccess?role=\" + userrole + \"&menu=customer\").then(res => {\n             if (!res.ok) {\n                 navigate('/');\n             toast.warning('You are not authorized to access');\n                 return false;\n"
                }
            ],
            "date": 1737534879657,
            "name": "Commit-0",
            "content": "import { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\n\nconst Customer = () => {\n    const [custlist, custupdate] = useState([]);\n    const [haveedit, editchange] = useState(false);\n    const [haveview, viewchange] = useState(false);\n    const [haveadd, addchange] = useState(false);\n    const [haveremove, removechange] = useState(false);\n\n    const navigate=useNavigate();\n\n\n    useEffect(() => {\n        GetUserAccess();\n        loadcustomer();\n       \n    }, []);\n\n    const loadcustomer = () => {\n        fetch(\"http://localhost:4000/customer\").then(res => {\n            if (!res.ok) {\n                return false\n            }\n            return res.json();\n        }).then(res => {\n            custupdate(res)\n        });\n    }\n\n    const GetUserAccess = () => {\n        const userrole = sessionStorage.getItem('userrole') != null ? sessionStorage.getItem('userrole').toString() : '';\n        fetch(\"http://localhost:8000/roleaccess?role=\" + userrole + \"&menu=customer\").then(res => {\n            if (!res.ok) {\n                navigate('/');\n            toast.warning('You are not authorized to access');\n                return false;\n            }\n            return res.json();\n        }).then(res => {\n            console.log(res);\n            if (res.length > 0) {\n                viewchange(true);\n                let userobj = res[0];\n                editchange(userobj.haveedit);\n                addchange(userobj.haveadd);\n                removechange(userobj.havedelete);\n            }else{\n                navigate('/');\n            toast.warning('You are not authorized to access');\n            }\n        })\n    }\n\n    const handleadd = () => {\n        if(haveadd){\n        toast.success('added')\n        }else{\n            toast.warning('You are not having access for add');\n        }\n    }\n    const handleedit = () => {\n        if(haveedit){\n        toast.success('edited')\n        }\n        else{\n            toast.warning('You are not having access for Edit');\n        }\n    }\n\n    const handleremove = () => {\n        if(haveremove){\n        toast.success('removed')\n        }else{\n            toast.warning('You are not having access for remove');\n        }\n    }\n\n\n    return (\n        <div className=\"container\">\n\n            <div className=\"card\">\n                <div className=\"card-header\">\n                    <h3>Customer Listing</h3>\n                </div>\n                <div className=\"card-body\">\n                    <button onClick={handleadd} className=\"btn btn-success\">Add (+)</button>\n                    <br></br>\n                    <table className=\"table table-bordered\">\n                        <thead className=\"bg-dark text-white\">\n                            <tr>\n                                <th>Code</th>\n                                <th>Name</th>\n                                <th>Email</th>\n                                <th>Action</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {custlist &&\n                                custlist.map(item => (\n                                    <tr key={item.code}>\n                                        <td>{item.code}</td>\n                                        <td>{item.name}</td>\n                                        <td>{item.email}</td>\n                                        <td>\n                                            <button onClick={handleedit} className=\"btn btn-primary\">Edit</button> |\n                                            <button onClick={handleremove} className=\"btn btn-danger\">Remove</button>\n                                        </td>\n\n                                    </tr>\n                                ))\n                            }\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Customer;"
        }
    ]
}